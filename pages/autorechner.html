<!-- Section: Auto-Rechner -->
<section id="autorechner">
    <div class="section-header">
        <h4>Rechner</h4>
        <h2>Auto: Kaufen vs. Leasing vs. Kredit</h2>
        <p>Vergleiche die Auswirkungen auf dein Verm√∂gen √ºber Zeit. Was kostet dich ein Auto wirklich?</p>
    </div>

    <div class="bento-grid">
        <!-- Calculator Inputs - Full Width with 2 Columns -->
        <div class="card card-full">
            <h3>Deine Ausgangslage</h3>

            <div class="calculator-inputs-grid">
                <!-- Left Column: Money -->
                <div class="input-column">
                    <div class="input-column-header">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <path d="M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8"/>
                            <path d="M12 18V6"/>
                        </svg>
                        Kapital & Kosten
                    </div>

                    <div class="input-group">
                        <label for="availableMoney">
                            Verf√ºgbares Kapital
                            <span class="value-display" id="availableMoneyDisplay">CHF 50'000</span>
                        </label>
                        <input type="range" id="availableMoney" value="50000" min="10000" max="200000" step="5000">
                    </div>

                    <div class="input-group">
                        <label for="carPrice">
                            Autopreis
                            <span class="value-display" id="carPriceDisplay">CHF 35'000</span>
                        </label>
                        <input type="range" id="carPrice" value="35000" min="5000" max="100000" step="1000">
                    </div>

                    <div class="input-group">
                        <label for="serviceFees">
                            J√§hrliche Servicekosten
                            <span class="value-display" id="serviceFeesDisplay">CHF 400/Jahr</span>
                        </label>
                        <input type="range" id="serviceFees" value="400" min="100" max="1500" step="50">
                    </div>
                </div>

                <!-- Right Column: Financing -->
                <div class="input-column">
                    <div class="input-column-header">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
                        </svg>
                        Finanzierung
                    </div>

                    <div class="input-row">
                        <div class="input-group input-group-half">
                            <label for="creditRate">
                                Kreditzins
                                <span class="value-display" id="creditRateDisplay">4.9%</span>
                            </label>
                            <input type="range" id="creditRate" value="4.9" min="0" max="12" step="0.1">
                        </div>

                        <div class="input-group input-group-half">
                            <label for="leasingRate">
                                Leasingzins
                                <span class="value-display" id="leasingRateDisplay">2.9%</span>
                            </label>
                            <input type="range" id="leasingRate" value="2.9" min="0" max="10" step="0.1">
                        </div>
                    </div>

                    <div class="input-row">
                        <div class="input-group input-group-half">
                            <label for="duration">
                                Laufzeit
                                <span class="value-display" id="durationDisplay">48 Monate</span>
                            </label>
                            <input type="range" id="duration" value="48" min="12" max="84" step="6">
                        </div>

                        <div class="input-group input-group-half">
                            <label for="investmentReturn">
                                Anlagerendite
                                <span class="value-display" id="investmentReturnDisplay">7.0%</span>
                            </label>
                            <input type="range" id="investmentReturn" value="7" min="0" max="12" step="0.5">
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Results with Recommendation Banner -->
        <div class="card card-full">
            <!-- Recommendation Banner -->
            <div class="recommendation-banner" id="recommendationBanner">
                <div class="recommendation-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z"/>
                    </svg>
                </div>
                <div class="recommendation-content">
                    <div class="recommendation-title">Ergebnis nach <span id="resultDuration">48</span> Monaten</div>
                    <div class="recommendation-text" id="recommendation">Bei dieser Anlagerendite ist <strong>Kredit</strong> die beste Option mit <strong>CHF 1'659</strong> mehr Verm√∂gen.</div>
                </div>
            </div>

            <h3 style="margin-top: 1.5rem;">Detaillierter Vergleich</h3>

            <div class="comparison-panels">
                <!-- Barkauf Panel -->
                <div class="comparison-panel panel-barkauf" id="panelBarkauf">
                    <div class="panel-header">
                        <h4><span class="emoji">üíµ</span> Barkauf</h4>
                        <span class="panel-badge" id="barkaufBadge">Empfohlen</span>
                    </div>
                    <div class="panel-body">
                        <div class="panel-section">
                            <h5>Initialkosten</h5>
                            <div class="breakdown-row breakdown-total">
                                <span>Kaufpreis</span>
                                <span id="barkaufKaufpreis">CHF 35'000</span>
                            </div>
                        </div>
                        <div class="panel-section">
                            <h5>Verm√∂gen am Ende</h5>
                            <div class="breakdown-row">
                                <span>Investiertes Portfolio</span>
                                <span id="barkaufPortfolio">CHF 18'450</span>
                            </div>
                            <div class="breakdown-row">
                                <span>Auto-Restwert</span>
                                <span id="barkaufCarValue">CHF 22'000</span>
                            </div>
                            <div class="breakdown-row breakdown-total positive">
                                <span>Gesamtverm√∂gen</span>
                                <span id="barkaufTotal">CHF 40'450</span>
                            </div>
                        </div>
                        <div class="panel-section">
                            <h5>Effektive Kosten</h5>
                            <div class="breakdown-row">
                                <span>Wertverlust Auto</span>
                                <span class="negative" id="barkaufDepreciation">-CHF 13'000</span>
                            </div>
                            <div class="breakdown-row">
                                <span>Servicekosten total</span>
                                <span class="negative" id="barkaufServiceCosts">-CHF 1'600</span>
                            </div>
                            <div class="breakdown-row breakdown-total negative">
                                <span>Total Kosten</span>
                                <span id="barkaufTotalCost">-CHF 13'500</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Leasing Panel -->
                <div class="comparison-panel panel-leasing" id="panelLeasing">
                    <div class="panel-header">
                        <h4><span class="emoji">üìã</span> Leasing</h4>
                        <span class="panel-badge panel-badge-warning" id="leasingBadge" style="display:none;">Kein Eigentum</span>
                    </div>
                    <div class="panel-body">
                        <div class="panel-section">
                            <h5>Monatliche Kosten</h5>
                            <div class="breakdown-row">
                                <span>Leasingrate</span>
                                <span id="leasingMonthlyRate">CHF 485/Mt.</span>
                            </div>
                            <div class="breakdown-row">
                                <span>Anzahl Raten</span>
                                <span id="leasingRateCount">48 Monate</span>
                            </div>
                            <div class="breakdown-row breakdown-total">
                                <span>Total bezahlt</span>
                                <span id="leasingTotalPaid">CHF 23'280</span>
                            </div>
                        </div>
                        <div class="panel-section">
                            <h5>Verm√∂gen am Ende</h5>
                            <div class="breakdown-row">
                                <span>Investiertes Portfolio</span>
                                <span id="leasingPortfolio">CHF 34'120</span>
                            </div>
                            <div class="breakdown-row" style="color: var(--text-muted);">
                                <span>Auto-Wert</span>
                                <span>CHF 0 (kein Eigentum)</span>
                            </div>
                            <div class="breakdown-row breakdown-total positive">
                                <span>Gesamtverm√∂gen</span>
                                <span id="leasingTotal">CHF 34'120</span>
                            </div>
                        </div>
                        <div class="panel-section">
                            <h5>Effektive Kosten</h5>
                            <div class="breakdown-row">
                                <span>Alle Leasingraten</span>
                                <span class="negative" id="leasingAllRates">-CHF 23'280</span>
                            </div>
                            <div class="breakdown-row" style="color: var(--text-muted); font-size: 0.85rem;">
                                <span colspan="2">Hinweis: Kein Gegenwert am Ende!</span>
                            </div>
                            <div class="breakdown-row breakdown-total negative">
                                <span>Total Kosten</span>
                                <span id="leasingTotalCost">-CHF 23'280</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Kredit Panel -->
                <div class="comparison-panel panel-kredit" id="panelKredit">
                    <div class="panel-header">
                        <h4><span class="emoji">üè¶</span> Kredit</h4>
                        <span class="panel-badge panel-badge-neutral" id="kreditBadge" style="display:none;">Alternative</span>
                    </div>
                    <div class="panel-body">
                        <div class="panel-section">
                            <h5>Monatliche Kosten</h5>
                            <div class="breakdown-row">
                                <span>Kreditrate</span>
                                <span id="kreditMonthlyRate">CHF 805/Mt.</span>
                            </div>
                            <div class="breakdown-row">
                                <span>Laufzeit</span>
                                <span id="kreditDuration">48 Monate</span>
                            </div>
                            <div class="breakdown-row">
                                <span>Davon Zinsen total</span>
                                <span class="negative" id="kreditInterest">-CHF 3'640</span>
                            </div>
                        </div>
                        <div class="panel-section">
                            <h5>Verm√∂gen am Ende</h5>
                            <div class="breakdown-row">
                                <span>Investiertes Portfolio</span>
                                <span id="kreditPortfolio">CHF 15'890</span>
                            </div>
                            <div class="breakdown-row">
                                <span>Auto-Restwert</span>
                                <span id="kreditCarValue">CHF 22'000</span>
                            </div>
                            <div class="breakdown-row breakdown-total positive">
                                <span>Gesamtverm√∂gen</span>
                                <span id="kreditTotal">CHF 37'890</span>
                            </div>
                        </div>
                        <div class="panel-section">
                            <h5>Effektive Kosten</h5>
                            <div class="breakdown-row">
                                <span>Wertverlust Auto</span>
                                <span class="negative" id="kreditDepreciation">-CHF 13'000</span>
                            </div>
                            <div class="breakdown-row">
                                <span>Zinsen + Servicekosten</span>
                                <span class="negative" id="kreditFeesAndInterest">-CHF 4'140</span>
                            </div>
                            <div class="breakdown-row breakdown-total negative">
                                <span>Total Kosten</span>
                                <span id="kreditTotalCost">-CHF 17'140</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Chart with Tabs -->
        <div class="card card-full">
            <h3>Verm√∂gensentwicklung √ºber Zeit</h3>
            <p style="color: var(--text-muted); margin-bottom: 1rem;">Klicke auf die Tabs um die Zusammensetzung jeder Option zu sehen.</p>

            <div class="chart-tabs">
                <button class="chart-tab active" data-view="overview">
                    <svg class="chart-tab-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="18" y1="20" x2="18" y2="10"></line>
                        <line x1="12" y1="20" x2="12" y2="4"></line>
                        <line x1="6" y1="20" x2="6" y2="14"></line>
                    </svg>
                    Vergleich
                </button>
                <button class="chart-tab" data-view="barkauf">
                    <svg class="chart-tab-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <rect x="2" y="6" width="20" height="12" rx="2"/>
                        <circle cx="12" cy="12" r="2"/>
                        <path d="M6 12h.01M18 12h.01"/>
                    </svg>
                    Barkauf
                </button>
                <button class="chart-tab" data-view="leasing">
                    <svg class="chart-tab-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                        <polyline points="14 2 14 8 20 8"/>
                        <line x1="16" y1="13" x2="8" y2="13"/>
                        <line x1="16" y1="17" x2="8" y2="17"/>
                    </svg>
                    Leasing
                </button>
                <button class="chart-tab" data-view="kredit">
                    <svg class="chart-tab-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="12" y1="1" x2="12" y2="23"/>
                        <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
                    </svg>
                    Kredit
                </button>
            </div>

            <div class="chart-container" style="height: 350px;">
                <canvas id="carComparisonChart"></canvas>
            </div>
        </div>

        <!-- Explanation Cards -->
        <div class="card card-sm">
            <h4 style="color: var(--success);">Barkauf</h4>
            <h3>Sofort bezahlen</h3>
            <p>Du zahlst den vollen Preis sofort. Das Restkapital kann weiter investiert werden.</p>
            <ul class="feature-list">
                <li>
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="m9 12 2 2 4-4"/></svg>
                    Keine Zinsen
                </li>
                <li>
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="m9 12 2 2 4-4"/></svg>
                    Sofort Eigent√ºmer
                </li>
                <li>
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="m9 12 2 2 4-4"/></svg>
                    Freie Verkaufsm√∂glichkeit
                </li>
            </ul>
        </div>

        <div class="card card-sm">
            <h4 style="color: var(--warning);">Leasing</h4>
            <h3>Mieten statt kaufen</h3>
            <p>Monatliche Raten, aber das Auto geh√∂rt dir nie. Am Ende: kein Eigentum.</p>
            <ul class="feature-list">
                <li>
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="m9 12 2 2 4-4"/></svg>
                    Niedrige Monatsraten
                </li>
                <li>
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="m15 9-6 6M9 9l6 6"/></svg>
                    Kein Eigentum
                </li>
                <li>
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="m15 9-6 6M9 9l6 6"/></svg>
                    Km-Beschr√§nkungen
                </li>
            </ul>
        </div>

        <div class="card card-sm">
            <h4 style="color: var(--danger);">Autokredit</h4>
            <h3>Finanzieren</h3>
            <p>Du wirst Eigent√ºmer, zahlst aber Zinsen auf den Kredit.</p>
            <ul class="feature-list">
                <li>
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="m9 12 2 2 4-4"/></svg>
                    Wirst Eigent√ºmer
                </li>
                <li>
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="m9 12 2 2 4-4"/></svg>
                    Kapital bleibt investiert
                </li>
                <li>
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="m15 9-6 6M9 9l6 6"/></svg>
                    Zinskosten
                </li>
            </ul>
        </div>

        <!-- Important Notes -->
        <div class="card card-full" style="background: linear-gradient(135deg, var(--bg-card) 0%, rgba(212, 175, 55, 0.08) 100%); border: 1px solid var(--border-accent);">
            <h3 style="color: var(--accent);">Wichtige Annahmen</h3>
            <ul class="feature-list">
                <li>
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="m9 12 2 2 4-4"/></svg>
                    <strong>Wertverlust:</strong> Das Auto verliert ca. 15% im ersten Jahr, danach 10% pro Jahr
                </li>
                <li>
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="m9 12 2 2 4-4"/></svg>
                    <strong>Leasing-Restwert:</strong> Typisch 40-50% nach 4 Jahren (hier: 45%)
                </li>
                <li>
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="m9 12 2 2 4-4"/></svg>
                    <strong>Zinsen:</strong> Leasingzins oft tiefer (Aktionen), Kreditzins meist h√∂her (Bankkonditionen)
                </li>
                <li>
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="m9 12 2 2 4-4"/></svg>
                    <strong>Servicekosten:</strong> J√§hrliche Wartung (Inspektion, √ñlwechsel, etc.) - bei Leasing oft im Full-Service inklusive
                </li>
                <li>
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="m9 12 2 2 4-4"/></svg>
                    <strong>Opportunit√§tskosten:</strong> Nicht investiertes Geld "kostet" dich die entgangene Rendite
                </li>
                <li>
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="m9 12 2 2 4-4"/></svg>
                    <strong>Steuern & Versicherung:</strong> Hier nicht ber√ºcksichtigt (sind bei allen Optionen √§hnlich)
                </li>
            </ul>
        </div>
    </div>
</section>
